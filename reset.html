<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Mot de passe oublié - RICHE BRS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <style>
    body{font-family:'Segoe UI',sans-serif;background:linear-gradient(135deg,#0d47a1,#1565c0);margin:0;padding:0;}
    .container{max-width:420px;margin:auto;padding:40px 20px;}
    .card{background:#fff;padding:32px;border-radius:16px;box-shadow:0 8px 25px rgba(0,0,0,0.2);}
    .logo{text-align:center;margin-bottom:10px;}
    .logo img{width:80px;height:80px;}
    h1{text-align:center;color:#0d47a1;margin-bottom:20px;}
    .form-group{margin-bottom:18px;}
    label{font-weight:bold;display:block;margin-bottom:6px;}
    input{width:100%;padding:12px;border:1px solid #ccc;border-radius:10px;font-size:1em;}
    button{width:100%;padding:14px;background:#0d47a1;color:#fff;border:none;border-radius:12px;font-size:1em;font-weight:bold;cursor:pointer;transition:.3s;}
    button:hover{background:#1565c0;}
    .link{text-align:center;margin-top:16px;font-size:.9em;}
    .link a{color:#0d47a1;font-weight:bold;text-decoration:none;}
    .msg{margin-top:15px;padding:10px;border-radius:8px;text-align:center;display:none;}
    .success{background:#e8f5e9;color:#2e7d32;}
    .error{background:#ffebee;color:#c62828;}
  </style>
</head>
<body oncontextmenu="return false">

<div class="container">
  <div class="card">
    <div class="logo"><img src="logo.png" alt="RICHE BRS"></div>
    <h1>Mot de passe oublié</h1>
    <form id="resetForm">
      <div class="form-group">
        <label>Email</label>
        <input type="email" id="email" required>
      </div>
      <button type="submit">Réinitialiser</button>
    </form>
    <div id="msgBox" class="msg"></div>
    <div class="link"><p><a href="login.html">Retour à la connexion</a></p></div>
  </div>
</div>

<!-- Firebase App SDK -->
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

<!-- Configuration Firebase -->
<script>
  const firebaseConfig = {
    apiKey: "AIzaSyDQ2UWK115OXfThwaGfetIUSPPz_Ry78BA",
    authDomain: "brs-riche.firebaseapp.com",
    projectId: "brs-riche",
    storageBucket: "brs-riche.appspot.com",
    messagingSenderId: "44338076148",
    appId: "1:44338076148:web:b0c32d6caa12221fe601a1",
    measurementId: "G-FQ5ZFB4FYM"
  };
  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();
  const db = firebase.firestore();
</script>

<!-- Script de gestion -->
<script>
  const form = document.getElementById('resetForm');
  const msgBox = document.getElementById('msgBox');

  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    msgBox.style.display = "none";

    const email = document.getElementById('email').value.trim();
    try {
      await auth.sendPasswordResetEmail(email);
      showMsg("✅ Email envoyé ! Vérifiez votre boîte de réception.", "success");
    } catch (err) {
      if (err.code === "auth/user-not-found") {
        showMsg("⚠️ Aucun compte associé à cet email.", "error");
      } else {
        showMsg("Erreur : " + err.message, "error");
      }
    }
  });

  function showMsg(txt, type) {
    msgBox.innerText = txt;
    msgBox.className = "msg " + type;
    msgBox.style.display = "block";
  }
</script>

</body>
  </html>
  
