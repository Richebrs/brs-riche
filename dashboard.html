
<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Dashboard - BRS Riche</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<style>
body {
  font-family:'Segoe UI',sans-serif; margin:0; padding:0;
  background:#f4f7fb; color:#333; user-select:none; display:none; overflow-x:hidden;
}
header {
  background:#0d47a1; color:#fff; padding:20px; text-align:center; position:relative;
}
header h1 { margin:0; font-size:1.6em; }
header .user-info { margin-top:8px; font-size:0.95em; opacity:0.9; }

/* --- Langue --- */
.lang-dropdown { position:absolute; top:20px; right:20px; }
.lang-btn { cursor:pointer; font-size:1.3em; }
.lang-menu {
  display:none; position:absolute; top:120%; right:0; background:#fff; color:#333;
  border-radius:8px; box-shadow:0 4px 10px rgba(0,0,0,0.2); min-width:120px; z-index:10;
}
.lang-menu div { padding:8px 12px; cursor:pointer; }
.lang-menu div:hover { background:#f0f0f0; }

/* --- Grande carte des soldes --- */
.balance-card {
  background:#fff; margin:20px; padding:20px; border-radius:16px;
  box-shadow:0 6px 16px rgba(0,0,0,0.15);
  display:flex; justify-content:space-between; gap:20px;
}
.balance-box { flex:1; text-align:center; }
.balance-box h3 { margin:0; font-size:1em; color:#0d47a1; }
.balance-box p { margin:8px 0 0; font-size:1.4em; font-weight:bold; }

/* --- Bouton historique --- */
.history-btn {
  display:block; margin:10px 20px; padding:15px;
  text-align:center; font-size:1.1em; font-weight:bold;
  color:#fff; background:#ff9800;
  border-radius:12px; text-decoration:none;
  box-shadow:0 4px 12px rgba(0,0,0,0.2);
  transition:background 0.2s;
}
.history-btn:hover { background:#e68900; }

/* --- Menus --- */
.menu {
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(100px,1fr));
  gap:15px; margin:20px;
}
.menu a {
  background:#ffcc00; color:#0d47a1; border-radius:14px;
  text-align:center; font-weight:bold; text-decoration:none;
  padding:20px 10px;
  box-shadow:0 6px 14px rgba(0,0,0,0.15);
  transition:transform 0.2s, background 0.2s;
}
.menu a i {
  display:block; font-size:2em; margin-bottom:8px;
}
.menu a:hover { transform:translateY(-4px); background:#e6b800; }

/* --- Bouton Pr√©sentation --- */
.presentation-btn {
  display:block; margin:20px auto; padding:15px 25px;
  background:#0d47a1; color:#fff; font-size:1.2em; font-weight:bold;
  border:none; border-radius:14px; cursor:pointer;
  box-shadow:0 4px 12px rgba(0,0,0,0.2);
}
.presentation-btn:hover { background:#08306b; }

/* --- Panel Pr√©sentation (√©lastique) --- */
.presentation-panel {
  position:fixed; bottom:-100%; left:0; right:0;
  background:#fff; border-radius:20px 20px 0 0;
  box-shadow:0 -4px 20px rgba(0,0,0,0.2);
  transition:bottom 0.3s ease-in-out, transform 0.3s ease;
  padding:20px; z-index:20; max-height:80%; overflow-y:auto;
}
.presentation-panel.active { bottom:0; }
.presentation-panel h2 { margin-top:0; color:#0d47a1; }
.presentation-panel p { line-height:1.5; }

/* Handle √©lastique */
.panel-handle {
  width:50px; height:6px; background:#ccc;
  border-radius:3px; margin:0 auto 15px;
}
@media(max-width:768px){
  .balance-card { flex-direction:column; text-align:center; }
}
</style>
</head>
<body>

<header>
  <h1 id="title">üíé Dashboard BRS Riche</h1>
  <div class="user-info" id="user-info"></div>
  <div class="lang-dropdown">
    <span class="lang-btn">üåê</span>
    <div class="lang-menu" id="lang-menu">
      <div data-lang="fr">üá´üá∑ Fran√ßais</div>
      <div data-lang="en">üá¨üáß English</div>
      <div data-lang="es">üá™üá∏ Espa√±ol</div>
    </div>
  </div>
</header>

<!-- Grande carte des soldes -->
<div class="balance-card">
  <div class="balance-box"><h3 id="lbl-disponible">Disponible</h3><p id="balance-available">$0.00</p></div>
  <div class="balance-box"><h3 id="lbl-retire">Retir√©</h3><p id="balance-withdrawn">$0.00</p></div>
  <div class="balance-box"><h3 id="lbl-total">Total</h3><p id="balance-total">$0.00</p></div>
</div>

<!-- Bouton Historique -->
<a href="history.html" class="history-btn" id="btn-history"><i class="fas fa-history"></i> Mes Historiques</a>

<!-- Menus -->
<div class="menu">
  <a href="deposit.html"><i class="fas fa-wallet"></i><span id="menu-deposit">D√©p√¥t</span></a>
  <a href="withdraw.html"><i class="fas fa-hand-holding-dollar"></i><span id="menu-withdraw">Retrait</span></a>
  <a href="referral.html"><i class="fas fa-users"></i><span id="menu-referral">Parrainage</span></a>
  <a href="hotels.html"><i class="fas fa-hotel"></i><span id="menu-hotels">Hotels</span></a>
  <a href="residences.html"><i class="fas fa-building"></i><span id="menu-residences">Residences</span></a>
  <a href="my-hotels.html"><i class="fas fa-home"></i><span id="menu-my-hotels">Mes Hotels</span></a>
  <a href="my-residences.html"><i class="fas fa-door-closed"></i><span id="menu-my-residences">Mes Residences</span></a>
  <a href="profile.html"><i class="fas fa-user"></i><span id="menu-profile">Profil</span></a>
</div>

<!-- Bouton Pr√©sentation -->
<button class="presentation-btn" id="open-presentation">üìñ Pr√©sentation</button>

<!-- Panel Pr√©sentation -->
<div class="presentation-panel" id="presentation-panel">
  <div class="panel-handle"></div>
  <h2>Pr√©sentation du Projet</h2>
  <p>
    ‚úÖ Ce projet permet d‚Äôinvestir dans des h√¥tels et r√©sidences.<br><br>
    ‚úÖ Vous gagnez en fonction de vos investissements et du parrainage.<br><br>
    ‚úÖ Plus vous investissez, plus vos gains augmentent.<br><br>
    ‚úÖ Transparence et retraits disponibles √† tout moment.
  </p>
</div>

<script>
// Anti copier / coller
document.addEventListener("copy", e=>e.preventDefault());
document.addEventListener("cut", e=>e.preventDefault());
document.addEventListener("contextmenu", e=>e.preventDefault());

// Config Firebase
const firebaseConfig = {
  apiKey: "AIzaSyDQ2UWK115OXfThwaGfetIUSPPz_Ry78BA",
  authDomain: "brs-riche.firebaseapp.com",
  projectId: "brs-riche",
  storageBucket: "brs-riche.appspot.com",
  messagingSenderId: "44338076148",
  appId: "1:44338076148:web:b0c32d6caa12221fe601a1",
  measurementId: "G-FQ5ZFB4FYM"
};
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();

// Traductions
const translations = {
  fr: {
    title:"üíé Dashboard BRS Riche",
    disponible:"Disponible", retire:"Retir√©", total:"Total",
    history:"üìú Mes Historiques",
    deposit:"D√©p√¥t", withdraw:"Retrait", referral:"Parrainage",
    hotels:"Hotels", residences:"R√©sidences", myHotels:"Mes Hotels",
    myResidences:"Mes R√©sidences", profile:"Profil",
    hello:"Bonjour"
  },
  en: {
    title:"üíé BRS Riche Dashboard",
    disponible:"Available", retire:"Withdrawn", total:"Total",
    history:"üìú My History",
    deposit:"Deposit", withdraw:"Withdraw", referral:"Referral",
    hotels:"Hotels", residences:"Residences", myHotels:"My Hotels",
    myResidences:"My Residences", profile:"Profile",
    hello:"Hello"
  },
  es: {
    title:"üíé Panel BRS Riche",
    disponible:"Disponible", retire:"Retirado", total:"Total",
    history:"üìú Mi Historial",
    deposit:"Dep√≥sito", withdraw:"Retiro", referral:"Referidos",
    hotels:"Hoteles", residences:"Residencias", myHotels:"Mis Hoteles",
    myResidences:"Mis Residencias", profile:"Perfil",
    hello:"Hola"
  }
};

function setLang(lang, userName=""){
  localStorage.setItem("lang", lang);
  const t = translations[lang];
  document.getElementById("title").innerText = t.title;
  document.getElementById("lbl-disponible").innerText = t.disponible;
  document.getElementById("lbl-retire").innerText = t.retire;
  document.getElementById("lbl-total").innerText = t.total;
  document.getElementById("btn-history").innerText = t.history;
  document.getElementById("menu-deposit").innerText = t.deposit;
  document.getElementById("menu-withdraw").innerText = t.withdraw;
  document.getElementById("menu-referral").innerText = t.referral;
  document.getElementById("menu-hotels").innerText = t.hotels;
  document.getElementById("menu-residences").innerText = t.residences;
  document.getElementById("menu-my-hotels").innerText = t.myHotels;
  document.getElementById("menu-my-residences").innerText = t.myResidences;
  document.getElementById("menu-profile").innerText = t.profile;
  if(userName){
    document.getElementById("user-info").innerText = `${t.hello}, ${userName}`;
  }
}

// Ouvrir / fermer menu langues
const langBtn = document.querySelector(".lang-btn");
const langMenu = document.getElementById("lang-menu");
langBtn.addEventListener("click", ()=> {
  langMenu.style.display = langMenu.style.display==="block" ? "none" : "block";
});
langMenu.querySelectorAll("div").forEach(el=>{
  el.addEventListener("click", ()=>{
    const lang = el.dataset.lang;
    setLang(lang, currentUserName);
    langMenu.style.display="none";
  });
});

let currentUserName="";

// V√©rifier si connect√©
auth.onAuthStateChanged(user=>{
  if(user){
    document.body.style.display="block";
    currentUserName = user.displayName || user.email;
    const savedLang = localStorage.getItem("lang") || "fr";
    setLang(savedLang, currentUserName);

    db.collection("users").doc(user.uid).onSnapshot(doc=>{
      if(doc.exists){
        const data=doc.data();
        document.getElementById("balance-available").innerText=`$${(data.balanceAvailable||0).toFixed(2)}`;
        document.getElementById("balance-withdrawn").innerText=`$${(data.balanceWithdrawn||0).toFixed(2)}`;
        document.getElementById("balance-total").innerText=`$${(data.balanceTotal||0).toFixed(2)}`;
      }
    });
  } else {
    window.location.href="login.html";
  }
});

// --- Panel Pr√©sentation avec effet √©lastique ---
const panel = document.getElementById("presentation-panel");
const handle = document.querySelector(".panel-handle");
let startY = 0;
let currentY = 0;
let isDragging = false;

document.getElementById("open-presentation").addEventListener("click", ()=>{
  panel.classList.add("active");
  panel.style.transform = "translateY(0)";
});

handle.addEventListener("click", ()=>{
  panel.classList.remove("active");
  panel.style.transform = "translateY(0)";
});

panel.addEventListener("touchstart", e=>{
  startY = e.touches[0].clientY;
  isDragging = true;
  panel.style.transition = "none";
});

panel.addEventListener("touchmove", e=>{
  if (!isDragging) return;
  currentY = e.touches[0].clientY;
  let diff = currentY - startY;

  if (diff > 0) {
    // tirer vers le bas
    panel.style.transform = `translateY(${diff}px)`;
  }
});

panel.addEventListener("touchend", ()=>{
  isDragging = false;
  panel.style.transition = "transform 0.3s ease, bottom 0.3s ease";

  if (currentY - startY > 100) {
    panel.classList.remove("active");
    panel.style.transform = "translateY(0)";
  } else {
    panel.style.transform = "translateY(0)";
  }
});
</script>

</body>
  </html>
                                        
