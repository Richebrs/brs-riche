
<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Dashboard - BRS Riche</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<style>
body { font-family:'Segoe UI',sans-serif; margin:0; padding:0; background:#f4f7fb; color:#333; user-select:none; }
header { background:#0d47a1; color:#fff; padding:20px; display:flex; justify-content:space-between; align-items:center; }
header h1 { margin:0; font-size:1.4em; }
header .user-info { font-size:0.95em; }
header .lang-switch { cursor:pointer; font-size:1.2em; }

.balance-card { background:#fff; margin:20px; padding:20px; border-radius:14px; box-shadow:0 6px 14px rgba(0,0,0,0.1); display:grid; grid-template-columns:repeat(3,1fr); gap:10px; text-align:center; }
.balance-box h3 { margin:0; font-size:1em; color:#0d47a1; }
.balance-box p { margin:5px 0 0; font-size:1.3em; font-weight:bold; }

.history-btn { display:block; margin:10px auto; padding:12px 20px; background:#ffcc00; color:#0d47a1; border:none; border-radius:10px; font-weight:bold; cursor:pointer; font-size:1em; box-shadow:0 4px 10px rgba(0,0,0,0.15); }
.history-btn:hover { background:#e6b800; }

.menu { display:flex; flex-wrap:wrap; justify-content:center; margin:20px 10px; gap:15px; }
.menu a { flex: 1 1 calc(30% - 10px); min-width:100px; background:#fff; color:#0d47a1; border-radius:14px; text-align:center; font-weight:bold; text-decoration:none; padding:20px 10px; box-shadow:0 6px 14px rgba(0,0,0,0.1); transition: transform 0.2s, background 0.2s; }
.menu a i { display:block; font-size:2em; margin-bottom:8px; }
.menu a:hover { transform:translateY(-4px); background:#f0f0f0; }

@media(max-width:768px){ 
  .balance-card { grid-template-columns:1fr; } 
  .menu a { flex:1 1 45%; } 
}
@media(max-width:480px){ 
  .menu a { flex:1 1 90%; } 
}
</style>
</head>
<body>

<header>
  <h1>üíé Dashboard BRS Riche</h1>
  <div>
    <span class="user-info" id="user-info">Bonjour, ...</span>
    &nbsp;&nbsp;
    <span class="lang-switch" id="lang-btn" title="Changer de langue">üåê</span>
  </div>
</header>

<div class="balance-card">
  <div class="balance-box"><h3 id="lbl-disponible">Disponible</h3><p id="balance-available">$0.00</p></div>
  <div class="balance-box"><h3 id="lbl-retire">Retir√©</h3><p id="balance-withdrawn">$0.00</p></div>
  <div class="balance-box"><h3 id="lbl-total">Total</h3><p id="balance-total">$0.00</p></div>
</div>

<button class="history-btn" onclick="location.href='history.html'">üìú Mes Historiques</button>

<div class="menu">
  <a href="deposit.html"><i class="fas fa-wallet"></i>D√©p√¥t</a>
  <a href="withdraw.html"><i class="fas fa-hand-holding-dollar"></i>Retrait</a>
  <a href="referral.html"><i class="fas fa-users"></i>Parrainage</a>
  <a href="hotels.html"><i class="fas fa-hotel"></i>Hotels</a>
  <a href="residences.html"><i class="fas fa-building"></i>Residences</a>
  <a href="my-hotels.html"><i class="fas fa-home"></i>Mes Hotels</a>
  <a href="my-residences.html"><i class="fas fa-door-closed"></i>Mes R√©sidences</a>
</div>

<script>
// Config Firebase
const firebaseConfig = {
  apiKey: "AIzaSyDQ2UWK115OXfThwaGfetIUSPPz_Ry78BA",
  authDomain: "brs-riche.firebaseapp.com",
  projectId: "brs-riche",
  storageBucket: "brs-riche.appspot.com",
  messagingSenderId: "44338076148",
  appId: "1:44338076148:web:b0c32d6caa12221fe601a1",
  measurementId: "G-FQ5ZFB4FYM"
};
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();

// Auth utilisateur
auth.onAuthStateChanged(user=>{
  if(user){
    document.getElementById("user-info").innerText = "Bonjour, " + (user.displayName || user.email);

    // Soldes
    db.collection('users').doc(user.uid).get().then(doc=>{
      if(doc.exists){
        const d=doc.data();
        document.getElementById('balance-available').innerText=`$${d.balanceAvailable.toFixed(2)}`;
        document.getElementById('balance-withdrawn').innerText=`$${d.balanceWithdrawn.toFixed(2)}`;
        document.getElementById('balance-total').innerText=`$${d.balanceTotal.toFixed(2)}`;
      }
    });
  } else {
    window.location.href="login.html";
  }
});

// Langue toggle simple FR/EN
let currentLang = "fr";
document.getElementById("lang-btn").addEventListener("click", ()=>{
  currentLang = currentLang === "fr" ? "en" : "fr";
  if(currentLang==="en"){
    document.getElementById("lbl-disponible").innerText="Available";
    document.getElementById("lbl-retire").innerText="Withdrawn";
    document.getElementById("lbl-total").innerText="Total";
    document.querySelector(".history-btn").innerText="üìú My History";
  } else {
    document.getElementById("lbl-disponible").innerText="Disponible";
    document.getElementById("lbl-retire").innerText="Retir√©";
    document.getElementById("lbl-total").innerText="Total";
    document.querySelector(".history-btn").innerText="üìú Mes Historiques";
  }
});
</script>
</body>
  </html>
                                                                    
